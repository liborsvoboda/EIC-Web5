import{defineExtendsPolyfill,showError}from"./utils.min.js";class LeafletMap extends HTMLDivElement{constructor(){super(),this._map=null,this._isConnected=!1}connectedCallback(){this._isConnected=!0,this.createMap()}disconnectedCallback(){this._isConnected=!1,null!==this._map&&(this._map.remove(),this._map=null)}static get observedAttributes(){return["latitude","longitude","zoom","marker"]}attributeChangedCallback(t){this._isConnected&&LeafletMap.observedAttributes.includes(t)&&this.createMap()}createMap(){const t=parseFloat(this.getAttribute("latitude")),e=parseFloat(this.getAttribute("longitude")),a=parseInt(this.getAttribute("zoom"),10),i=this.getAttribute("marker"),l=[{attr:"latitude",value:t},{attr:"longitude",value:e},{attr:"zoom",value:a}];for(let t=0,e=l.length;t<e;t++)if(isNaN(l[t].value)){const e=this.getAttribute(l[t].attr);if(null!==this.getAttribute("data-bind-attr")&&(null===e||e.startsWith("[")||""===e||"null"===e))return;return showError(this,"Leaflet Map - Invalid Attribute for ["+l[t].attr+"]"),console.log(l[t].attr),console.log(this.getAttribute(l[t].attr)),void console.log(this)}if(void 0!==window.L){if(null!==this._map&&(this._map.remove(),this._map=null),this._map=L.map(this).setView([t,e],a),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright" target="_blank">OpenStreetMap</a> contributors'}).addTo(this._map),null!==i){const a=L.marker([t,e]).addTo(this._map);i&&a.bindPopup(i),a.openPopup()}}else showError(this,"Error - Unable to show map because Leaflet is not loaded on the page.")}}window.customElements.define("leaflet-map",LeafletMap,{extends:"div"}),defineExtendsPolyfill("leaflet-map","div",(t=>{t._map=null,LeafletMap.prototype.createMap.apply(t)}));
import{WebComponentService}from"./WebComponentService.min.js";window.customElements.define("highlighter-service",class extends WebComponentService{onLoad(t){const e=t.nodeName;("URL-ROUTE"===e||e.includes("-SERVICE"))&&(t=document);const n=document.querySelector(".highlighter");if(null===n)return;const i=n.querySelectorAll("[data-highlight-selector]");let o=!1;for(const t of i){const e=t.getAttribute("data-highlight-selector");let n=t.getAttribute("data-highlight-value");const i=t.getAttribute("data-highlight-operator"),l=t.getAttribute("data-highlight-class"),r=["===","!==","contains"];let a=!1,s=0,c="",h=0;if(""===e||null===n||""===n||null===i||""===i||null===l||""===l)return void console.error("Error from [app.plugins.highlighter], Invalid Selector Element. Attributes [data-highlight-selector], [data-highlight-value], [data-highlight-operator], and [data-highlight-class] are all required.");if(-1===r.indexOf(i))return void console.error("Error from [app.plugins.highlighter], [data-highlight-operator] can only handle '"+r.join("', '")+"' options");n.indexOf("|")>-1&&(n=n.split("|"),h=n.length,a=!0);const g=document.querySelectorAll(e);for(let t=0,e=g.length;t<e;t++){let e=!0;if(a)switch(i){case"===":for(let i=0;i<h&&(e=g[t].textContent===n[i],!e);i++);break;case"!==":for(let i=0;i<h&&(e=g[t].textContent!==n[i],e);i++);break;case"contains":for(let i=0;i<h&&(e=g[t].textContent.indexOf(n)>-1,!e);i++);}else switch(i){case"===":e=g[t].textContent===n;break;case"!==":e=g[t].textContent!==n;break;case"contains":e=g[t].textContent.indexOf(n)>-1}e&&(g[t].classList.add(l),s++)}if(0===s)t.textContent="",t.style.display="none";else{switch(o=!0,a&&(n=n.join("], [")),i){case"===":c=String(s)+" Records matched ["+n+"]";break;case"!==":c=String(s)+" Records did not match ["+n+"]";break;case"contains":c=String(s)+" Records contain ["+n+"]";break;default:c="Highlighting "+String(s)+" Cells"}t.textContent=c,t.style.display=""}}n.style.display=o?"":"none"}});
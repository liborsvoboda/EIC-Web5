!function(){"use strict";var f={fileName:"_",fileDir:"i18n",defaultLocale:null,supportedLocales:null,currentLocale:null,langText:{},langCache:{},getText:function(e){return this.langText&&this.langText[e]?this.langText[e]:e},getUserDefaultLang:function(){if(navigator.languages&&navigator.languages.length&&this.supportedLocales&&this.supportedLocales.length)for(var e=0,t=navigator.languages.length;e<t;e++)if(-1!==this.supportedLocales.indexOf(navigator.languages[e]))return navigator.languages[e];return this.defaultLocale},readSettings:function(){var e=document.documentElement,t=e.getAttribute("data-i18n-file");null!==t&&(this.fileName=t),null!==(t=e.getAttribute("data-i18n-dir"))&&(this.fileDir=t),null===this.defaultLocale&&(this.defaultLocale=e.getAttribute("data-i18n-default")),null===this.supportedLocales&&(this.supportedLocales=e.getAttribute("data-i18n-locales"),null!==this.supportedLocales&&(this.supportedLocales=this.supportedLocales.split(",").map(function(e){return e.trim()})))},validateSettings:function(){return null===this.defaultLocale?(console.warn("Using [i18n] plugin without [defaultLocale / data-i18n-file] being filled in."),!1):null===this.supportedLocales?(console.warn("Using [i18n] plugin without [supportedLocales / data-i18n-locales] being filled in."),!1):!!Array.isArray(this.supportedLocales)||(console.error("Using [i18n] plugin [supportedLocales] must be an array."),!1)},onRouteLoad:function(n){var e=this.validateSettings(),t=(this.currentLocale=null,void 0===app.routingMode||"hash"===app.routingMode());if(t?e&&0===window.location.hash.indexOf("#/")&&(this.currentLocale=window.location.hash.split("/")[1]):e&&1<window.location.pathname.split("/").length&&(this.currentLocale=window.location.pathname.split("/")[1]),null!==this.currentLocale&&(""!==this.currentLocale&&-1!==this.supportedLocales.indexOf(this.currentLocale)||(this.currentLocale=null)),window.i18n_Locale=this.currentLocale,window.app&&"object"==typeof window.app.activeModel&&(window.app.activeModel.i18n_Locale=this.currentLocale),null===this.currentLocale)return n(!1),void(window.app&&window.app.controller&&null!==window.app.controller("/:lang/")&&(t?window.location="#/"+this.defaultLocale+"/":app.changeRoute("/"+this.defaultLocale+"/")));document.documentElement.lang=this.currentLocale;var a=this.fileDir+"/"+this.fileName+"."+this.currentLocale+".json",e=[this.downloadFile(a)],i=null;app.activeController&&app.activeController.settings&&app.activeController.settings.i18nFile&&(t=app.activeController.settings.i18nFile,i=this.fileDir+"/"+t+"."+this.currentLocale+".json",e.push(this.downloadFile(i))),Promise.all(e).finally(function(){f.langText=i?app.deepClone({},f.langCache[a],f.langCache[i]):f.langCache[a];var e,t="app:i18nLoaded";"function"==typeof Event?e=new Event(t,{bubbles:!0}):(e=document.createEvent("Event")).initEvent(t,!0,!1),document.dispatchEvent(e),n()})},downloadFile:function(t){return void 0!==this.langCache[t]?new Promise(function(e){e()}):fetch(t,{cache:"no-store",credentials:"same-origin",headers:window.app&&window.app.getRequestHeaders?window.app.getRequestHeaders(t):{}}).then(function(e){var t=e.status;return 200<=t&&t<300||304===t?Promise.resolve(e):(t="Error loading data. Server Response Code: "+t+", Response Text: "+e.statusText,Promise.reject(t))}).then(function(e){return e.json()}).then(function(e){f.langCache[t]=e}).catch(function(e){e="Error Downloading I18N file: ["+t+"], Response Code Status: "+e.message;console.error(e),f.langCache[t]={}})},onRendered:function(e){for(var t,n,a,u,i,l,o,r,d,p,g,h=void 0===app.routingMode||"hash"===app.routingMode(),s=0,c=(t=(e=e||document).querySelectorAll("[data-i18n]")).length;s<c;s++)a=(n=t[s]).getAttribute("data-i18n"),n.textContent=this.langText[a]||a;for(s=0,c=(t=e.querySelectorAll("[data-i18n-attr]")).length;s<c;s++)n=t[s],f.set18nAttr(n,n.getAttribute("data-i18n-attr")),null!==n.getAttribute("data-control")&&app.loadJsControl(n);for(s=0,c=(t=e.querySelectorAll("a[data-i18n-href]")).length;s<c;s++)d=(n=t[s]).getAttribute("href").split("/"),g=n.getAttribute("href"),(h?0===g.indexOf("#/"):0===g.indexOf("/"))&&1<d.length&&(d[1]=this.currentLocale,n.href=d.join("/"));for(s=0,c=(t=e.querySelectorAll("a[data-i18n-locales]")).length;s<c;s++)o=(n=t[s]).getAttribute("data-i18n-locales").split(",").map(function(e){return e.trim()}),r=this.currentLocale,-1===o.indexOf(r)&&(r=-1!==o.indexOf(this.defaultLocale)?this.defaultLocale:o[0]),l=new RegExp("\\[locale]","g"),n.href=n.href.replace(l,r);for(s=0,c=(t=e.querySelectorAll("[data-i18n-replace-text]")).length;s<c;s++){for(a in i=(n=t[s]).innerHTML,this.langText)this.langText.hasOwnProperty(a)&&-1!==i.indexOf("[[i18n "+a+"]]")&&(l=new RegExp("\\[\\[i18n "+a+"]]","g"),u=this.langText[a]||a,i=i.replace(l,u));n.innerHTML=i}for(s=0,c=(t=document.querySelectorAll("[data-i18n-nav-lang]")).length;s<c;s++)p=(n=t[s]).getAttribute("data-i18n-nav-lang"),h?n.href=window.location.hash.replace("#/"+f.currentLocale+"/","#/"+p+"/"):(n.href=window.location.pathname.replace("/"+f.currentLocale+"/","/"+p+"/"),n.addEventListener("click",app.pushStateClick));for(s=0,c=(t=document.querySelectorAll("[data-i18n-nav-selected]")).length;s<c;s++)t[s].textContent=f.currentLocale},set18nAttr:function(e,t){for(var n=t.split(",").map(function(e){return e.trim()}),a=0,i=n.length;a<i;a++){var l=n[a];if(null!==(s=e.getAttribute(l)))if(void 0===(c=this.langText[s])){for(var o=/\[\[.*\]\]/g;null!==(r=o.exec(s));){var r,s,c=r[0].substring(2,r[0].length-2);void 0!==this.langText[c]&&(r=r[0].replace(/\[/g,"\\["),r=new RegExp(r,"g"),s=s.replace(r,this.langText[c]))}e.setAttribute(l,s)}else e.setAttribute(l,c);else console.warn(e,"Missing Attribute ["+l+"] for element")}},setup:function(){var e,t;window.i18nText=f.getText.bind(f),window.Handlebars&&Handlebars.registerHelper("i18n",function(e,t){return void 0===t?(console.warn("Warning {{i18n}} is not being called with correct parameters, expected {{i18n key}}, parameters:"),console.log(e),console.log(t),"Error"):f.langText&&f.langText[e]?f.langText[e]:e}),window.Vue&&(e=function(e,t){t=t.value;e.textContent=f.langText&&f.langText[t]?f.langText[t]:t},t=function(e,t){void 0!==t.value&&f.set18nAttr(e,t.value)},void 0===Vue.directive&&"function"==typeof Vue.createApp?(app.vueDirectives=app.vueDirectives||{},app.vueDirectives.i18n={beforeMount:e},app.vueDirectives["i18n-attr"]={beforeMount:t}):(Vue.directive("i18n",{bind:e}),Vue.directive("i18n-attr",{bind:t})))}};f.readSettings(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f.setup):f.setup(),app.addPlugin("i18n",f)}();
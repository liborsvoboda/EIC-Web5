!function(){"use strict";var o={linkSelector:"[data-one-page]",activeLinkClass:"active",scrollToDelayOnPageLoad:500,useBrowserScrollIntoView:!1,_routeLoaded:!1,_isScrolling:!1,_targetElements:[],onAllowRouteChange:function(){return!this._routeLoaded||!this.scrollToHashElement()},onRendered:function(){o.useBrowserScrollIntoView?this.setup():(window.__forceSmoothScrollPolyfill__=!0,app.loadScripts("https://cdn.jsdelivr.net/npm/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js").then(function(){o.setup()})),document.addEventListener("scroll",o.handleScroll)},onRouteUnload:function(){this._routeLoaded=!1,this._isScrolling=!1,this._targetElements=[],document.removeEventListener("scroll",o.handleScroll)},elementIsVisible:function(t){var e=window.getComputedStyle(t);if("none"===e.display||"visible"!==e.visibility||parseFloat(e.opacity)<.1)return!1;e=t.getBoundingClientRect();return!(0===e.width||0===e.height||e.left+e.width<0||e.top+e.height<0||e.top>window.innerHeight||e.left>window.innerWidth)},getVisibleHeightPx:function(t,e){var t=t.getBoundingClientRect(),n=t.bottom-t.top,o=0<=t.top&&t.top<e,i=0<t.bottom&&t.bottom<e,l=0;return o&&i?l=n:o?l=e-t.top:i?l=t.bottom:e<n&&t.top<0&&((o=Math.abs(t.top))<n&&(l=n-o)),l},handleScroll:function(){var e,t;o._isScrolling||0!==o._targetElements.length&&(o._targetElements.sort(function(t,e){return t.getBoundingClientRect().top-e.getBoundingClientRect().top}),0!==(t=o._targetElements.filter(function(t){return o.elementIsVisible(t)})).length&&(t="#"+(1<t.length?(e=[],t.forEach(function(t){e.push({pixelsOnScreen:o.getVisibleHeightPx(t,window.innerHeight),el:t})}),e.sort(function(t,e){return t.pixelsOnScreen-e.pixelsOnScreen}),e[e.length-1].el):t[0]).id,window.location.hash!==t&&(window.history.replaceState(null,null,t),o.setActiveLinks())))},scrollToHashElement:function(){var t=window.location.hash;if(t&&"#"===t[0]){var e=document.getElementById(t.substring(1));if(e)return window.setTimeout(function(){o._routeLoaded&&(o._isScrolling=!0,e.scrollIntoView({block:"start",behavior:"smooth"}),o.setActiveLinks(),window.setTimeout(function(){o._isScrolling=!1},500))},this.scrollToDelayOnPageLoad),!0}return!1},setup:function(){this._routeLoaded=!0,this.scrollToHashElement();var t=document.querySelectorAll(o.linkSelector);Array.prototype.forEach.call(t,function(t){t.addEventListener("click",o.handleLinkClick)}),o._targetElements=[],Array.prototype.forEach.call(t,function(t){!t.hash||(t=document.getElementById(t.hash.substring(1)))&&-1===o._targetElements.indexOf(t)&&o._targetElements.push(t)})},setActiveLinks:function(){var t;o.activeLinkClass&&(t=document.querySelectorAll(o.linkSelector),Array.prototype.forEach.call(t,function(t){o.activeLinkClass&&(t.hash===window.location.hash?t.classList.add(o.activeLinkClass):t.classList.remove(o.activeLinkClass))}))},handleLinkClick:function(t){var e,n=this.hash;!n||(e=document.getElementById(n.substring(1)))&&(t.preventDefault(),o._isScrolling=!0,e.scrollIntoView({block:"start",behavior:"smooth"}),window.history.pushState(null,null,n),o.setActiveLinks(),window.setTimeout(function(){o._isScrolling=!1},500))}};app.addPlugin("onePageSite",o)}();
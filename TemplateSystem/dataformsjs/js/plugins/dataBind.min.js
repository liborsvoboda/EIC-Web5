!function(){"use strict";function i(t){null===app.activeModel&&(app.activeModel={});var e=t.target.type,a="checkbox"===e||"radio"===e?t.target.checked:t.target.value,i=t.target.getAttribute("data-bind");if(-1===i.indexOf("."))app.activeModel[i]=a;else{var n=i.split("."),e="window"===n[0],r=e?window:app.activeModel;for(e&&n.splice(0,1);0<n.length;)i=n[0],1===n.length?r[i]=a:("object"!=typeof r[i]&&(r[i]={}),r=r[i]),n.splice(0,1)}}var c={getBindValue:function(t,e){if(void 0===e)e=app.activeModel;else{if(null===e&&!t.startsWith("window."))return null;if(null===t)throw new Error("Missing [data-bind] attribute.")}for(var a=t.split("."),i=1<a.length&&"window"===a[0]?window:e,n=0,r=a.length;n<r;n++)i="object"==typeof i&&null!==i?i[a[n]]:null;return void 0===i?null:i},bindAttrTmpl:function(o,l,d){o.getAttribute(l).split(",").map(function(t){return t.trim()}).forEach(function(t){var e=o.getAttribute(l+"-"+t);if(null===e&&null!==(e=o.getAttribute(t))&&o.setAttribute(l+"-"+t,e),null!==e){for(var a=0;a<100;){var i=e.indexOf("["),n=e.indexOf("]");if(-1===i||-1===n||n<i)break;var r=e.substring(i+1,n),r=c.getBindValue(r,d);null===r&&(r=""),e=e.substring(0,i)+r+e.substring(n+1),a++}o.setAttribute(t,e)}})},onRendered:function(t){var e=(t=void 0===t?document:t).querySelectorAll("[data-bind]");Array.prototype.forEach.call(e,function(t){var e=t.getAttribute("data-bind");if(""!==e){var e=c.getBindValue(e),a=t.nodeName;if("INPUT"===a||"SELECT"===a||"TEXTAREA"===a){a=t.type,a=("checkbox"===a||"radio"===a?"boolean"==typeof e?t.checked=e:(e=String(e).toLowerCase(),t.checked="1"===e||"true"===e||"yes"===e||"y"===e):t.value=e,i({target:t}),void 0===t.oninput?"change":"input");t.addEventListener(a,i)}else if(null===t.getAttribute("data-control")&&-1===t.tagName.indexOf("-")){a=t.getAttribute("data-format");if(null!==a)if(void 0!==app.format&&"function"==typeof app.format[a])e=app.format[a](e);else if("function"==typeof window[a])try{e=window[a](e)}catch(t){console.error(t),e="Error: "+t.message}else e="Error: Unhandled format function ["+a+"]",console.warn("Check if the script [js/extensions/format.js] should be included or if a function is missing.");t.textContent=e}}else null===t.getAttribute("data-control")&&-1===t.tagName.indexOf("-")&&console.warn("Element has a [data-bind] attribute, but no field specified")}),e=t.querySelectorAll("[data-bind-attr]"),Array.prototype.forEach.call(e,function(t){c.bindAttrTmpl(t,"data-bind-attr",app.activeModel)}),e=t.querySelectorAll("[data-show]"),Array.prototype.forEach.call(e,function(e){if(null===app.activeModel||app.activeModel&&!0===app.activeModel.isLoading)e.style.display="none";else{var t=e.getAttribute("data-show");try{var a=new Function("state","format","with(state){return "+t+"}")(app.activeModel,app.format);e.style.display=!0===a?"":"none"}catch(t){e.style.display="",void 0!==app.activeModel.isLoading&&(console.warn("Error evaluating JavaScript expression from [data-show] attribute."),console.warn(t))}}})}};app.addPlugin("dataBind",c)}();
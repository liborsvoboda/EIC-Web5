!function(){"use strict";var r=void 0===window.React&&void 0!==window.preact?window.preact:window.React;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(e=e,!(null!=(t=t)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n),t=(e=a?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=!1;try{var e=Object.defineProperty({},"passive",{get:function(){return c=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}var m=-1<(e=window.navigator.userAgent.toLowerCase()).indexOf("android")||-1<e.indexOf("iphone")||-1<e.indexOf("ipad"),g=null,h=null;function A(e){return r.createElement("img",{src:e.thumbnail,alt:e.title,tabIndex:e.tabIndex,onClick:e.onClick,onKeyDown:e.onKeyDown,key:e.key,style:{cursor:"pointer"}})}var t=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e);var n,a=y(o);function o(e){var t;if(u(this,o),(t=a.call(this,e)).onClick=t.onClick.bind(s(t)),t.onKeyDown=t.onKeyDown.bind(s(t)),t.handleDocKeyDown=t.handleDocKeyDown.bind(s(t)),t.preloadNextImages=t.preloadNextImages.bind(s(t)),t.showOverlay=t.showOverlay.bind(s(t)),t.hideOverlay=t.hideOverlay.bind(s(t)),t.changeImage=t.changeImage.bind(s(t)),void 0===e||void 0===e.images)throw new Error("Error - ImageGallery - Missing props or images from props. See examples for usage.");return t.svgForwardButton='<svg width="13" height="22" xmlns="http://www.w3.org/2000/svg"><path d="M3.4.6L12 9c.4.4.6 1 .6 1.5a2 2 0 01-.6 1.5l-8.5 8.5a2 2 0 01-2.8-2.8l7.2-7.2L.6 3.4A2 2 0 013.4.6z" fill="#fff" fill-rule="evenodd"/></svg>',t.svgBackButton='<svg width="13" height="22" xmlns="http://www.w3.org/2000/svg"><path d="M9 .6L.7 9a2 2 0 00-.6 1.5c0 .5.2 1.1.6 1.5L9 20.6a2 2 0 002.8-2.8l-7.2-7.2L12 3.4A2 2 0 009.1.6z" fill="#fff" fill-rule="evenodd"/></svg>',t.overlayStyleId="image-gallery-css",t.overlayStyleCss='\n            body.blur { filter: blur(3px); }\n\n            .image-gallery-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(255,255,255,.8);\n                cursor: pointer;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                flex-direction: column;\n            }\n\n            .image-gallery-overlay .image-gallery-loading {\n                font-weight: bold;\n                padding: 10px 20px;\n                background-color: rgba(255,255,255,.4);\n                position: absolute;\n            }\n\n            .image-gallery-overlay img {\n                max-width: 100%;\n                max-height: 100%;\n                flex-shrink: 0;\n            }\n\n            .image-gallery-overlay div {\n                position: absolute;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                z-index: 2;\n                font-weight: bold;\n                display: flex;\n                justify-content: space-between;\n                width: 100%;\n            }\n\n            .image-gallery-overlay div.no-title {\n                justify-content: flex-end;\n            }\n\n            .image-gallery-overlay div span {\n                padding: 10px 20px;\n                background-color: rgba(255,255,255,.4);\n            }\n\n            .image-gallery-overlay .btn-previous,\n            .image-gallery-overlay .btn-next {\n                display: block;\n                position: absolute;\n                height: 40px;\n                width: 40px;\n                opacity: .7;\n                background-repeat: no-repeat;\n                background-position: center;\n                padding: 0;\n                margin: 15px;\n                background-color: rgba(0,0,0,.5);\n                border-radius: 50%;\n                transition: all ease-in-out .2s;\n            }\n            .image-gallery-overlay .btn-previous { left: 0; background-position-x: 12px; background-image: url("data:image/svg+xml;base64,'.concat(btoa(t.svgBackButton),'"); }\n            .image-gallery-overlay .btn-next { right: 0; background-position-x: 15px; background-image: url("data:image/svg+xml;base64,').concat(btoa(t.svgForwardButton),'"); }\n\n            .image-gallery-overlay .btn-previous:hover,\n            .image-gallery-overlay .btn-next:hover {\n                opacity: .5;\n            }\n\n            .image-gallery-overlay.mobile .btn-previous,\n            .image-gallery-overlay.mobile .btn-next,\n            .image-gallery-overlay.keyboard .btn-previous,\n            .image-gallery-overlay.keyboard .btn-next {\n                display: none;\n            }\n\n            @media (min-width: 1300px) {\n                .image-gallery-overlay div {\n                    left: calc((100% - 1300px) /2);\n                    right: auto;\n                    max-width: 1300px;\n                }\n            }\n        '),-1!==navigator.userAgent.indexOf("Trident/")&&(t.overlayStyleCss+="\n                @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n                    .image-gallery-overlay .image-gallery-loading,\n                    .image-gallery-overlay .btn-previous,\n                    .image-gallery-overlay .btn-next { margin-top: calc((100vh /2) - 35px); }\n                }\n            "),t.imageIndex=null,t.overlay=null,t.overlayImg=null,t.overlayTitle=null,t.overlayIndex=null,t.overlayLoading=null,t.overlayBackButton=null,t.overlayFowardButton=null,t.touchStartX=null,t.touchPinchToZoom=!1,t.touchPinchEndTime=null,t.loadingTimeoutId=null,t.loadingText=e.loadingText||"Loading...",t.loadingTimeout=e.loadingTimeout||2e3,t.loadedImages=new Set,t.startedFromKeyboard=!1,t.state={images:e.images},t}return t=o,(e=[{key:"onClick",value:function(e){var t=(t=e.target.src)||e.target.getAttribute("data-image");this.imageIndex=-1;for(var n=0,a=this.state.images.length;n<a;n++)if(this.state.images[n].thumbnail===t){this.imageIndex=n;break}this.checkSupportedFormats()}},{key:"onKeyDown",value:function(e){" "!==e.key&&"Spacebar"!==e.key||(null===this.overlay&&(this.startedFromKeyboard=!0,this.onClick(e)),e.preventDefault())}},{key:"loadCss",value:function(){var e=document.getElementById(this.overlayStyleId);null===e&&((e=document.createElement("style")).id=this.overlayStyleId,e.innerHTML=this.overlayStyleCss,document.head.appendChild(e))}},{key:"checkSupportedFormats",value:function(){var e,t,n;function a(){null!==g&&null!==h&&e()}null===g||null===h?(e=this.showOverlay,(t=new Image).onload=function(){g=1===t.width&&1===t.height,a()},t.onerror=function(){g=!1,a()},t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABoAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACJtZGF0EgAKCBgABogQEAwgMgwYAAAAUAAAALASmpg=",(n=new Image).onload=function(){h=1===n.width&&1===n.height,a()},n.onerror=function(){h=!1,a()},n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"):this.showOverlay()}},{key:"showOverlay",value:function(){var e=this,t=this.getImage(this.state.images[this.imageIndex]),n=this.state.images[this.imageIndex].title,a=(this.loadCss(),this.overlay=document.createElement("div"),this.overlay.className="image-gallery-overlay"+(m?" mobile":"")+(this.startedFromKeyboard?" keyboard":""),this.overlayLoading=document.createElement("span"),this.overlayLoading.className="image-gallery-loading",this.overlayLoading.textContent=this.loadingText,this.overlayLoading.setAttribute("hidden",""),this.overlay.appendChild(this.overlayLoading),this.overlayBackButton=document.createElement("span"),this.overlayBackButton.className="btn-previous",this.overlayBackButton.setAttribute("role","button"),this.overlayBackButton.onclick=function(){e.changeImage("left")},this.overlayFowardButton=document.createElement("span"),this.overlayFowardButton.className="btn-next",this.overlayFowardButton.setAttribute("role","button"),this.overlayFowardButton.onclick=function(){e.changeImage("right")},this.overlay.appendChild(this.overlayBackButton),this.overlay.appendChild(this.overlayFowardButton),this.overlayImg=document.createElement("img"),this.overlayImg.addEventListener("load",function(){e.loadedImages.add(t),e.clearLoadingTimer(),null!==e.overlayLoading&&e.overlayLoading.setAttribute("hidden",""),e.preloadNextImages()}),this.overlayImg.src=t,this.overlay.appendChild(this.overlayImg),document.createElement("div"));this.overlayTitle=document.createElement("span"),this.overlayTitle.textContent=n,this.overlayTitle.style.display=n?"":"none",a.className=n?"":"no-title",a.appendChild(this.overlayTitle),this.overlayIndex=document.createElement("span"),this.overlayIndex.textContent="".concat(this.imageIndex+1,"/").concat(this.state.images.length),a.appendChild(this.overlayIndex),this.overlay.appendChild(a),this.addOverlayEvents(),document.documentElement.appendChild(this.overlay),document.querySelector("body").classList.add("blur"),this.startLoadingTimer()}},{key:"getImage",value:function(e){return void 0!==e.image_avif&&g?e.image_avif:void 0!==e.image_webp&&h?e.image_webp:e.image}},{key:"startLoadingTimer",value:function(){var e=this;this.clearLoadingTimer(),this.loadingTimeoutId=window.setTimeout(function(){(e.loadingTimeoutId=null)!==e.overlayLoading&&e.overlayLoading.removeAttribute("hidden")},this.loadingTimeout)}},{key:"clearLoadingTimer",value:function(){null!==this.loadingTimeoutId&&(window.clearTimeout(this.loadingTimeoutId),this.loadingTimeoutId=null)}},{key:"addOverlayEvents",value:function(){var a=this;this.overlay.onclick=function(e){if("ontouchstart"in window){var t=window.innerHeight,n=t/4;if(e.clientY>=n&&e.clientY<=t-n)return}e.target!==a.overlayBackButton&&e.target!==a.overlayFowardButton&&a.hideOverlay()},document.addEventListener("keydown",this.handleDocKeyDown),this.overlay.addEventListener("touchstart",function(e){a.touchStartX=e.changedTouches[0].screenX,2===e.touches.length&&(a.touchPinchToZoom=!0)},!!c&&{passive:!0}),this.overlay.addEventListener("touchend",function(e){if(a.touchPinchToZoom)return a.touchPinchEndTime=new Date,void(a.touchPinchToZoom=!1);a.touchPinchEndTime&&(new Date).getTime()-a.touchPinchEndTime.getTime()<=200||((e=e.changedTouches[0].screenX)>a.touchStartX?a.changeImage("left"):e<a.touchStartX&&a.changeImage("right"))})}},{key:"handleDocKeyDown",value:function(e){switch(e.key){case"ArrowLeft":case"Left":this.changeImage("left");break;case"ArrowRight":case"Right":this.changeImage("right");break;case"Escape":case"Esc":this.hideOverlay()}}},{key:"componentWillUnmount",value:function(){this.hideOverlay()}},{key:"hideOverlay",value:function(){this.clearLoadingTimer(),this.overlay.parentNode.removeChild(this.overlay),this.overlayBackButton=null,this.overlayFowardButton=null,this.overlayLoading=null,this.overlayIndex=null,this.overlayTitle=null,this.overlayImg=null,this.overlay=null,this.startedFromKeyboard=!1,document.removeEventListener("keydown",this.handleDocKeyDown),document.querySelector("body").classList.remove("blur")}},{key:"preloadNextImages",value:function(){var e,t,n,a,o=this;-1!==window.Image.toString().indexOf("[native code]")?(a=this.state.images.length,(t=-1===(t=this.imageIndex-1)?a-1:t)===this.imageIndex||(e=this.getImage(this.state.images[t]))&&!this.loadedImages.has(e)&&((t=new Image).onload=function(){o.loadedImages.add(e)},t.src=e),(t=(t=this.imageIndex+1)===a?0:t)===this.imageIndex||(n=this.getImage(this.state.images[t]))&&!this.loadedImages.has(n)&&((a=new Image).onload=function(){o.loadedImages.add(n)},a.src=n)):console.warn("Images for <ImageGallery> cannot be preloaded because the app defined a <Image> component that overwrote the browsers native [Image] class.")}},{key:"changeImage",value:function(e){var t=this.state.images.length,e=(this.imageIndex="right"===e?this.imageIndex===t-1?0:this.imageIndex+1:0===this.imageIndex?t-1:this.imageIndex-1,this.state.images[this.imageIndex].title);this.overlayImg.src="",this.overlayImg.src=this.getImage(this.state.images[this.imageIndex]),this.overlayTitle.textContent=e,this.overlayTitle.style.display=e?"":"none",this.overlayTitle.parentNode.className=e?"":"no-title",this.overlayIndex.textContent="".concat(this.imageIndex+1,"/").concat(t),this.startLoadingTimer()}},{key:"render",value:function(){var n=this,a=this.props.template,o=(void 0===a&&(a=void 0!==this.props.children?this.props.children:r.createElement(A)),parseInt(this.props.tabIndex,10)),i=window.isFinite(o);return this.state.images.map(function(e,t){t={key:t.toString()+"_"+e.thumbnail,onClick:n.onClick,onKeyDown:n.onKeyDown};return i&&(t.tabIndex=o,o++),r.cloneElement(a,Object.assign({},e,t))})}}])&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component);window.ImageGallery=t}();
{"version":3,"file":"spawnAsync.js","names":["_child_process","require","spawnAsync","cmd","args","options","process","spawn","Object","assign","windowsHide","Promise","resolve","stdout","stderr","on","data","toString","code","error"],"sources":["../../src/utils/spawnAsync.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { SpawnOptions } from 'child_process';\nimport { spawn } from 'child_process';\n\nexport function spawnAsync(cmd: string, args: string[], options: SpawnOptions = {}): Promise<{stdout: string, stderr: string, code: number | null, error?: Error}> {\n  const process = spawn(cmd, args, Object.assign({ windowsHide: true }, options));\n\n  return new Promise(resolve => {\n    let stdout = '';\n    let stderr = '';\n    if (process.stdout)\n      process.stdout.on('data', data => stdout += data.toString());\n    if (process.stderr)\n      process.stderr.on('data', data => stderr += data.toString());\n    process.on('close', code => resolve({ stdout, stderr, code }));\n    process.on('error', error => resolve({ stdout, stderr, code: 0, error }));\n  });\n}\n"],"mappings":";;;;;;AAiBA,IAAAA,cAAA,GAAAC,OAAA;AAjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKO,SAASC,UAAUA,CAACC,GAAW,EAAEC,IAAc,EAAEC,OAAqB,GAAG,CAAC,CAAC,EAAiF;EACjK,MAAMC,OAAO,GAAG,IAAAC,oBAAK,EAACJ,GAAG,EAAEC,IAAI,EAAEI,MAAM,CAACC,MAAM,CAAC;IAAEC,WAAW,EAAE;EAAK,CAAC,EAAEL,OAAO,CAAC,CAAC;EAE/E,OAAO,IAAIM,OAAO,CAACC,OAAO,IAAI;IAC5B,IAAIC,MAAM,GAAG,EAAE;IACf,IAAIC,MAAM,GAAG,EAAE;IACf,IAAIR,OAAO,CAACO,MAAM,EAChBP,OAAO,CAACO,MAAM,CAACE,EAAE,CAAC,MAAM,EAAEC,IAAI,IAAIH,MAAM,IAAIG,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC;IAC9D,IAAIX,OAAO,CAACQ,MAAM,EAChBR,OAAO,CAACQ,MAAM,CAACC,EAAE,CAAC,MAAM,EAAEC,IAAI,IAAIF,MAAM,IAAIE,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC;IAC9DX,OAAO,CAACS,EAAE,CAAC,OAAO,EAAEG,IAAI,IAAIN,OAAO,CAAC;MAAEC,MAAM;MAAEC,MAAM;MAAEI;IAAK,CAAC,CAAC,CAAC;IAC9DZ,OAAO,CAACS,EAAE,CAAC,OAAO,EAAEI,KAAK,IAAIP,OAAO,CAAC;MAAEC,MAAM;MAAEC,MAAM;MAAEI,IAAI,EAAE,CAAC;MAAEC;IAAM,CAAC,CAAC,CAAC;EAC3E,CAAC,CAAC;AACJ","ignoreList":[]}